// Copyright 2019 Fitmedia

// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at

//     https://www.apache.org/licenses/LICENSE-2.0

// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Fitmedia Conversion Pixel",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "This conversion pixel template can help you integrate the functionality of google tag manager with the conversion measurement functionality of Fitmedia DSP",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "audienceID",
    "displayName": "Audience ID",
    "simpleValueType": true,
    "notSetText": "Preencha esse campo",
    "valueHint": "145154",
    "defaultValue": 0
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// require relevant API
const sendPixel = require('sendPixel');
const encodeUriComponent = require('encodeUriComponent');

// capture values of template fields
const audienceid = data.audienceID;

const url = "https://pool.admedo.com/pixel?id="+encodeUriComponent(audienceid)+"&t=js";

sendPixel(url, data.gtmOnSuccess, data.gtmOnFailure);


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "send_pixel",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://pool.admedo.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 08/01/2020 14:50:51


